{"version":3,"file":"redux-leaflet.es.js","sources":["../src/bootstrap.js","../src/baselayers.js","../src/MapContainer.js","../src/components/layers/WMSTileLayer.js"],"sourcesContent":["import L from 'leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl\r\n\r\nimport marker from 'leaflet/dist/images/marker-icon.png'\r\nimport marker2x from 'leaflet/dist/images/marker-icon-2x.png'\r\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png'\r\n\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: marker2x,\r\n    iconUrl: marker,\r\n    shadowUrl: markerShadow\r\n})\r\n","export default {\r\n    google: {\r\n        \"control\": \"basemap\",\r\n        \"title\": \"Google\",\r\n        \"active\": true,\r\n        \"type\": \"tile\",\r\n        \"options\": {\r\n            \"url\": \"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\",\r\n            \"subdomains\": [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\r\n            \"attribution\": \"Map data &copy; <a href='https://www.google.com/maps'>Google Maps</a>\"\r\n        }\r\n    },\r\n    openstreet: {\r\n        \"control\": \"basemap\",\r\n        \"title\": \"OpenStreetMap\",\r\n        \"type\": \"tile\",\r\n        \"options\": {\r\n            \"url\": \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n            \"attribution\": \"&copy; <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\r\n        }\r\n    },\r\n    terrain: {\r\n        \"control\": \"basemap\",\r\n        \"title\": \"Địa hình\",\r\n        \"type\": \"tile\",\r\n        \"options\": {\r\n            \"url\": \"http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}\",\r\n            \"subdomains\": [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\r\n            \"attribution\": \"Map data &copy; <a href='https://www.google.com/maps'>Google Maps</a>\"\r\n        }\r\n    },\r\n    hybrid: {\r\n        \"control\": \"basemap\",\r\n        \"title\": \"Tổng hợp\",\r\n        \"type\": \"tile\",\r\n        \"options\": {\r\n            \"url\": \"http://{s}.google.com/vt/lyrs=y&x={x}&y={y}&z={z}\",\r\n            \"subdomains\": [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\r\n            \"attribution\": \"Map data &copy; <a href='https://www.google.com/maps'>Google Maps</a>\"\r\n        }\r\n    }\r\n}","import React, {memo, useEffect, useState} from 'react'\r\nimport layers from './baselayers'\r\nimport {map, isEmpty} from 'lodash-es'\r\nimport {Map, Marker, Popup, TileLayer, LayersControl, GeoJSON, useLeaflet} from 'react-leaflet'\r\n\r\nconst {BaseLayer, Overlay} = LayersControl\r\n\r\nfunction MapContainer({children, loaded}) {\r\n    const position = [16.3109371, 103.8910913]\r\n\r\n    if(!loaded) return null\r\n\r\n    return (\r\n        <Map center={position} zoom={6} style={{width: '100%', height: '100%'}}>\r\n            <LayersControl position=\"topright\">\r\n                {map(layers, ({title, active = false, options}, k) => (\r\n                    <BaseLayer key={k} checked={active} name={title}>\r\n                        <TileLayer {...options}/>\r\n                    </BaseLayer>\r\n                ))}\r\n\r\n            </LayersControl>\r\n            {children}\r\n        </Map>\r\n    )\r\n}\r\n\r\nMapContainer.defaultProps = {\r\n    loaded: true\r\n}\r\n\r\nexport default memo(MapContainer)","import { tileWMSLayer } from '@ttungbmt/leaflet.wms'\r\nimport { isEqual } from 'lodash-es'\r\nimport PropTypes from 'prop-types'\r\nimport { GridLayer, withLeaflet } from 'react-leaflet'\r\n\r\nconst EVENTS_RE = /^on(.+)$/i\r\n\r\nclass WMSTileLayer extends GridLayer {\r\n    createLeafletElement(props) {\r\n        const {url, boundary, ...params} = props\r\n\r\n        const {leaflet: _l, ...options} = this.getOptions(params)\r\n        return tileWMSLayer(url, options)\r\n    }\r\n\r\n    updateLeafletElement(fromProps: Props, toProps: Props) {\r\n        super.updateLeafletElement(fromProps, toProps)\r\n        const {uuid: preUuid, url: prevUrl, opacity: _po, zIndex: _pz, ...prevProps} = fromProps\r\n        const {leaflet: _pl, ...prevParams} = this.getOptions(prevProps)\r\n        const {uuid, url, opacity: _o, zIndex: _z, ...props} = toProps\r\n        const {leaflet: _l, ...params} = this.getOptions(props)\r\n\r\n        if (uuid !== preUuid) {\r\n            this.leafletElement.uuid = uuid\r\n        }\r\n\r\n        if (url !== prevUrl) {\r\n            this.leafletElement.setUrl(url)\r\n        }\r\n        if (!isEqual(params, prevParams)) {\r\n            this.leafletElement.setParams(params)\r\n        }\r\n    }\r\n\r\n    getOptions(params): Object {\r\n        const superOptions = super.getOptions(params)\r\n        return Object.keys(superOptions).reduce((options, key) => {\r\n            if (!EVENTS_RE.test(key)) {\r\n                options[key] = superOptions[key]\r\n            }\r\n            return options\r\n        }, {})\r\n    }\r\n}\r\n\r\n\r\nWMSTileLayer.propTypes = {\r\n    layers: PropTypes.string.isRequired\r\n}\r\n\r\nexport default withLeaflet(WMSTileLayer)"],"names":["L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","marker2x","iconUrl","marker","shadowUrl","markerShadow","google","openstreet","terrain","hybrid","BaseLayer","LayersControl","Overlay","MapContainer","children","loaded","position","width","height","map","layers","k","title","active","options","defaultProps","memo","EVENTS_RE","WMSTileLayer","props","url","boundary","params","getOptions","_l","leaflet","tileWMSLayer","fromProps","toProps","preUuid","uuid","prevUrl","_po","opacity","_pz","zIndex","prevProps","_pl","prevParams","_o","_z","leafletElement","setUrl","isEqual","setParams","superOptions","Object","keys","reduce","key","test","GridLayer","propTypes","PropTypes","string","isRequired","withLeaflet"],"mappings":"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"}