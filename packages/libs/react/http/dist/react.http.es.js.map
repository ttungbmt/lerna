{"version":3,"file":"react.http.es.js","sources":["../src/useFetch.js"],"sourcesContent":["import axios from 'axios'\r\nimport {useQuery} from 'react-query'\r\nimport {get, isString, isFunction} from 'lodash-es'\r\nimport isJSON from 'validator/lib/isJSON'\r\n\r\nconst getData = async (key, {url, transformResponse}) => {\r\n    const { data } = await axios({\r\n        url,\r\n        transformResponse: [function (data) {\r\n            if(isJSON(data)) {\r\n                let result = JSON.parse(data)\r\n\r\n                if(isString(transformResponse)) {\r\n                    return get(result, transformResponse)\r\n                } else if(isFunction(transformResponse)){\r\n                    return transformResponse(result)\r\n                }\r\n\r\n                return result\r\n            }\r\n\r\n            return data\r\n        }]\r\n    })\r\n    return data\r\n}\r\n\r\n\r\n\r\nfunction useFetch(props) {\r\n    const {key, url, transformResponse, initialData, manual = false} = props\r\n\r\n    const {data, status, ...request} = useQuery([key, {url, transformResponse}], getData, { manual })\r\n\r\n    return {\r\n        data,\r\n        loading: status === 'success',\r\n        ...request\r\n    }\r\n}\r\n\r\nexport default useFetch"],"names":["getData","key","url","transformResponse","axios","data","isJSON","result","JSON","parse","isString","get","isFunction","useFetch","props","initialData","manual","useQuery","status","request","loading"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,OAAO;AAAA,sEAAG,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAaC,YAAAA,GAAb,QAAaA,GAAb,EAAkBC,iBAAlB,QAAkBA,iBAAlB;AAAA;AAAA,mBACWC,KAAK,CAAC;AACzBF,cAAAA,GAAG,EAAHA,GADyB;AAEzBC,cAAAA,iBAAiB,EAAE,CAAC,UAAUE,IAAV,EAAgB;AAChC,oBAAGC,MAAM,CAACD,IAAD,CAAT,EAAiB;AACb,sBAAIE,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAb;;AAEA,sBAAGK,QAAQ,CAACP,iBAAD,CAAX,EAAgC;AAC5B,2BAAOQ,GAAG,CAACJ,MAAD,EAASJ,iBAAT,CAAV;AACH,mBAFD,MAEO,IAAGS,UAAU,CAACT,iBAAD,CAAb,EAAiC;AACpC,2BAAOA,iBAAiB,CAACI,MAAD,CAAxB;AACH;;AAED,yBAAOA,MAAP;AACH;;AAED,uBAAOF,IAAP;AACH,eAdkB;AAFM,aAAD,CADhB;;AAAA;AAAA;AACJA,YAAAA,IADI,gBACJA,IADI;AAAA,6CAmBLA,IAnBK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAPL,OAAO;AAAA;AAAA;AAAA,GAAb;;AAwBA,SAASa,QAAT,CAAkBC,KAAlB,EAAyB;AAAA,MACdb,GADc,GAC8Ca,KAD9C,CACdb,GADc;AAAA,MACTC,GADS,GAC8CY,KAD9C,CACTZ,GADS;AAAA,MACJC,iBADI,GAC8CW,KAD9C,CACJX,iBADI;AAAA,MACeY,WADf,GAC8CD,KAD9C,CACeC,WADf;AAAA,sBAC8CD,KAD9C,CAC4BE,MAD5B;AAAA,MAC4BA,MAD5B,8BACqC,KADrC;;AAAA,kBAGcC,QAAQ,CAAC,CAAChB,GAAD,EAAM;AAACC,IAAAA,GAAG,EAAHA,GAAD;AAAMC,IAAAA,iBAAiB,EAAjBA;AAAN,GAAN,CAAD,EAAkCH,OAAlC,EAA2C;AAAEgB,IAAAA,MAAM,EAANA;AAAF,GAA3C,CAHtB;AAAA,MAGdX,IAHc,aAGdA,IAHc;AAAA,MAGRa,MAHQ,aAGRA,MAHQ;AAAA,MAGGC,OAHH;;AAKrB;AACId,IAAAA,IAAI,EAAJA,IADJ;AAEIe,IAAAA,OAAO,EAAEF,MAAM,KAAK;AAFxB,KAGOC,OAHP;AAKH;;;;"}