{"version":3,"file":"react.form.cjs.js","sources":["../src/Select.js","../src/Input.js","../src/Field.js"],"sourcesContent":["import React, {memo, useEffect, useState} from 'react'\r\nimport { Form } from 'react-bootstrap'\r\nimport { map, get, isArray, omit } from 'lodash-es'\r\nimport {  useFormContext  } from \"react-hook-form\"\r\nimport $ from 'jquery'\r\nimport 'dependent-dropdown'\r\n\r\nconst transOpts = (opts) => {\r\n    if(!opts) return []\r\n    if(isArray(opts)) return opts\r\n\r\n    return map(opts, (v, k) => ({value: k, label: v}))\r\n}\r\n\r\nconst useUrl = ({url, depends, ajaxSettings, placeholder = 'Chọn...', name, path, ...props}, {setData}) => {\r\n    const { control } = useFormContext()\r\n    useEffect(() => {\r\n        if(url){\r\n          if(depends) {\r\n              let el = get(control, `fieldsRef.current.${name}.ref`)\r\n              $(el).depdrop({\r\n                  depends,\r\n                  url,\r\n                  loadingText: 'Đang tải ...',\r\n                  placeholder,\r\n                  emptyMsg: 'Không có dữ liệu',\r\n                  ajaxSettings\r\n              })\r\n          } else {\r\n              $.get(url, (opts) => {\r\n                  setData(transOpts(path ? get(opts, path) : opts))\r\n              })\r\n          }\r\n        }\r\n    }, [])\r\n}\r\n\r\n\r\nfunction Select({register, children, options, ...props}) {\r\n    const [data, setData] = useState(transOpts(options))\r\n    const dropProps = omit(props, ['ajaxSettings'])\r\n    useUrl(props, {setData})\r\n\r\n    useEffect(() => {\r\n        setData(transOpts(options))\r\n    }, [JSON.stringify(options)])\r\n\r\n    return (\r\n        <Form.Control as=\"select\" ref={register} {...dropProps} defaultValue={props.selected}>\r\n            {data.length > 0 && <option value=\"\">{props.placeholder}</option>}\r\n            {children}\r\n            {map(data, ({value, label}, k) => (<option key={k} value={value}>{label}</option>))}\r\n        </Form.Control>\r\n    )\r\n}\r\n\r\nexport default memo(Select)","import React, { memo, useEffect, useRef } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\nimport { get, omit } from 'lodash-es'\r\n// import $ from 'jquery'\r\nimport { useFormContext } from \"react-hook-form\"\r\n// import 'bootstrap-datepicker'\r\n// import 'bootstrap-datepicker/dist/locales/bootstrap-datepicker.vi.min.js'\r\n// import 'bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css'\r\n\r\n// function useDatepicker({as, name}, ref) {\r\n//     const {control, setValue} = useFormContext()\r\n//\r\n//     useEffect(() => {\r\n//         if (as === 'datepicker') {\r\n//             ref.current = get(control, `fields.${name}.ref`)\r\n//             let options = {\r\n//                     format: \"dd/mm/yyyy\",\r\n//                     todayBtn: \"linked\",\r\n//                     clearBtn: true,\r\n//                     language: \"vi\",\r\n//                     autoclose: true,\r\n//                     todayHighlight: true\r\n//                 }\r\n//\r\n//             $(ref.current).datepicker(options).on('changeDate', e => setValue(e.target.value))\r\n//         }\r\n//\r\n//         return () => {\r\n//             if (as === 'datepicker') $(ref.current).datepicker('destroy')\r\n//         }\r\n//     }, [])\r\n//\r\n// }\r\n\r\nfunction Input({register, children, ...props}) {\r\n    let ref = useRef(props)\r\n    // useDatepicker(props, ref)\r\n\r\n    return (\r\n        <Form.Control ref={register} {...omit(props, ['as'])}>\r\n        </Form.Control>\r\n    )\r\n}\r\n\r\nexport default memo(Input)","import React, {memo} from 'react'\r\nimport { Form } from 'react-bootstrap'\r\nimport {  useFormContext  } from 'react-hook-form'\r\n\r\nimport Select from './Select'\r\nimport Input from './Input';\r\n\r\nfunction Field({children, label, as, ...props}) {\r\n    const { register } = useFormContext()\r\n\r\n    let Control = () => <></>\r\n\r\n    switch (as){\r\n        case 'select':\r\n            Control = Select\r\n            break\r\n        case 'datepicker':\r\n        case 'input':\r\n            Control = Input\r\n            break\r\n        default:\r\n            Control = Input\r\n            break\r\n    }\r\n\r\n\r\n    return (\r\n        <Form.Group>\r\n            {label && <Form.Label>{label}</Form.Label>}\r\n            <Control register={register} {...props} as={as}>\r\n                {children}\r\n            </Control>\r\n        </Form.Group>\r\n    )\r\n}\r\n\r\nexport default memo(Field)\r\n"],"names":["transOpts","opts","isArray","map","v","k","value","label","useUrl","setData","url","depends","ajaxSettings","placeholder","name","path","props","useFormContext","control","useEffect","el","get","$","depdrop","loadingText","emptyMsg","Select","register","children","options","useState","data","dropProps","omit","JSON","stringify","React","Form","selected","length","memo","Input","ref","useRef","Field","as","Control"],"mappings":"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"}