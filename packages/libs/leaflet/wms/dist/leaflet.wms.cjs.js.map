{"version":3,"file":"leaflet.wms.cjs.js","sources":["../src/TileWMSLayer.js"],"sourcesContent":["import L, { TileLayer } from 'leaflet'\r\nimport 'leaflet.nontiledlayer'\r\nimport { getFeatureInfoUrl } from '@ttungbmt/geo'\r\nimport uniqid from 'uniqid'\r\n\r\nconst getOptions = ({uuid, ...options}) => ({\r\n    format: 'image/png',\r\n    transparent: true,\r\n    ...options\r\n})\r\n\r\nexport const TileWMSLayer = TileLayer.WMS.extend({\r\n    initialize: function(url, options = {}) {\r\n        TileLayer.WMS.prototype.initialize.call(this, url, this.getOptions(options))\r\n        this.uuid = options.uuid ? options.uuid : uniqid()\r\n\r\n    },\r\n\r\n    getOptions,\r\n\r\n    getFeatureInfoUrl: function (latlng, params) {\r\n        return getFeatureInfoUrl(this, latlng, params)\r\n    }\r\n})\r\n\r\nexport const SingleTileWMSLayer = L.NonTiledLayer.WMS.extend({\r\n    initialize: function(url, options = {}) {\r\n        L.NonTiledLayer.WMS.prototype.initialize.call(this, url, this.getOptions(options))\r\n        this.uuid = options.uuid ? options.uuid : uniqid()\r\n    },\r\n\r\n    getOptions,\r\n\r\n    getFeatureInfoUrl: function (latlng, params) {\r\n        return getFeatureInfoUrl(this, latlng, params)\r\n    }\r\n})\r\n\r\nL.tileWMSLayer = tileWMSLayer\r\n\r\nexport function tileWMSLayer(url, {tiled, ...options}) {\r\n    return tiled ? new SingleTileWMSLayer (url, options) : new TileWMSLayer(url, options);\r\n}\r\n\r\n"],"names":["getOptions","uuid","options","format","transparent","TileWMSLayer","TileLayer","WMS","extend","initialize","url","prototype","call","uniqid","getFeatureInfoUrl","latlng","params","SingleTileWMSLayer","L","NonTiledLayer","tileWMSLayer","tiled"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,UAAU,GAAG,SAAbA,UAAa;AAAA,MAAEC,IAAF,QAAEA,IAAF;AAAA,MAAWC,OAAX;;AAAA;AACfC,IAAAA,MAAM,EAAE,WADO;AAEfC,IAAAA,WAAW,EAAE;AAFE,KAGZF,OAHY;AAAA,CAAnB;;AAMO,IAAMG,YAAY,GAAGC,WAAS,CAACC,GAAV,CAAcC,MAAd,CAAqB;AAC7CC,EAAAA,UAAU,EAAE,oBAASC,GAAT,EAA4B;AAAA,QAAdR,OAAc,uEAAJ,EAAI;AACpCI,IAAAA,WAAS,CAACC,GAAV,CAAcI,SAAd,CAAwBF,UAAxB,CAAmCG,IAAnC,CAAwC,IAAxC,EAA8CF,GAA9C,EAAmD,KAAKV,UAAL,CAAgBE,OAAhB,CAAnD;AACA,SAAKD,IAAL,GAAYC,OAAO,CAACD,IAAR,GAAeC,OAAO,CAACD,IAAvB,GAA8BY,MAAM,EAAhD;AAEH,GAL4C;AAO7Cb,EAAAA,UAAU,EAAVA,UAP6C;AAS7Cc,EAAAA,iBAAiB,EAAE,2BAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AACzC,WAAOF,qBAAiB,CAAC,IAAD,EAAOC,MAAP,EAAeC,MAAf,CAAxB;AACH;AAX4C,CAArB,CAArB;AAcA,IAAMC,kBAAkB,GAAGC,UAAC,CAACC,aAAF,CAAgBZ,GAAhB,CAAoBC,MAApB,CAA2B;AACzDC,EAAAA,UAAU,EAAE,oBAASC,GAAT,EAA4B;AAAA,QAAdR,OAAc,uEAAJ,EAAI;AACpCgB,IAAAA,UAAC,CAACC,aAAF,CAAgBZ,GAAhB,CAAoBI,SAApB,CAA8BF,UAA9B,CAAyCG,IAAzC,CAA8C,IAA9C,EAAoDF,GAApD,EAAyD,KAAKV,UAAL,CAAgBE,OAAhB,CAAzD;AACA,SAAKD,IAAL,GAAYC,OAAO,CAACD,IAAR,GAAeC,OAAO,CAACD,IAAvB,GAA8BY,MAAM,EAAhD;AACH,GAJwD;AAMzDb,EAAAA,UAAU,EAAVA,UANyD;AAQzDc,EAAAA,iBAAiB,EAAE,2BAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AACzC,WAAOF,qBAAiB,CAAC,IAAD,EAAOC,MAAP,EAAeC,MAAf,CAAxB;AACH;AAVwD,CAA3B,CAA3B;AAaPE,UAAC,CAACE,YAAF,GAAiBA,YAAjB;AAEO,SAASA,YAAT,CAAsBV,GAAtB,SAAgD;AAAA,MAApBW,KAAoB,SAApBA,KAAoB;AAAA,MAAVnB,OAAU;;AACnD,SAAOmB,KAAK,GAAG,IAAIJ,kBAAJ,CAAwBP,GAAxB,EAA6BR,OAA7B,CAAH,GAA2C,IAAIG,YAAJ,CAAiBK,GAAjB,EAAsBR,OAAtB,CAAvD;AACH;;;;"}